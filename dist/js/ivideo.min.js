/*! 版权所有，翻版必究 */!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=13)}([function(t,e,i){"use strict";function n(){var t=window.navigator.userAgent;return{isIphone:/iPhone/i.test(t),isIpad:/iPad/i.test(t),isAndroid:/Android/i.test(t),isMac:!1,isWeixin:/MicroMessenger/i.test(t),isQQ:/QQ\//.test(t),isQQBrowser:/MQQBrowser/.test(t),isChrome:/Chrome/.test(t),isIE:!1,isFirefox:!1,isSafari:/Safari/.test(t)&&!/Chrome/.test(t),version:0,userAgent:t}}function r(){var t=new Date,e=s(t.getHours()),i=s(t.getMinutes()),n=s(t.getSeconds());return"".concat(e,":").concat(i,":").concat(n)}function o(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if("--"===t)return t;var i=Math.floor(t/60),n=Math.floor(t%60),r=60<i?Math.floor(i/60):0;return t=s(i)+":"+s(n),(r||e)&&(t=s(r)+":"+t),t}function s(t){return t<10?"0"+t:t}function c(t){return"[object Function]"===Object.prototype.toString.call(t)}function u(t){return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:document).querySelector(t)}function a(t){return document.createElement(t)}function l(t,e){var i;if(!(2<arguments.length&&void 0!==arguments[2]&&arguments[2]))return Object.assign(t,e),t;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];f(r)?(t[n]=f(t[n])?t[n]:{},l(t[n],r,!0)):(i=r,Array.isArray(i)?t[n]=r.concat([]):t[n]=r)}return t}function f(t){return"[object Object]"===Object.prototype.toString.call(t)}i.d(e,"d",function(){return n}),i.d(e,"g",function(){return r}),i.d(e,"e",function(){return o}),i.d(e,"h",function(){return c}),i.d(e,"i",function(){return u}),i.d(e,"c",function(){return a}),i.d(e,"b",function(){return l}),i.d(e,"j",function(){return p}),i.d(e,"f",function(){return h}),i.d(e,"a",function(){return v});var d=0;function p(t,e){e=e||2e3,t.classList.remove("toast-hide"),clearTimeout(d),d=setTimeout(function(){t.classList.add("toast-hide")},e)}function h(t){(t=t||document.documentElement).requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function v(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},function(t,e,i){(function(t,n){var r=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(c(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,o=n.length,s=String(t).replace(r,function(t){if("%%"===t)return"%";if(o<=i)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(t){return"[Circular]"}default:return t}}),u=n[i];i<o;u=n[++i])v(u)||!w(u)?s+=" "+u:s+=" "+c(u);return s},e.deprecate=function(i,r){if(m(t.process))return function(){return e.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return i.apply(this,arguments)}};var o,s={};function c(t,i){var n={seen:[],stylize:a};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),h(i)?n.showHidden=i:i&&e._extend(n,i),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,t,n.depth)}function u(t,e){var i=c.styles[e];return i?"["+c.colors[i][0]+"m"+t+"["+c.colors[i][1]+"m":t}function a(t,e){return t}function l(t,i,n){if(t.customInspect&&i&&j(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return g(r)||(r=l(t,r,n)),r}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(g(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return y(e)?t.stylize(""+e,"number"):h(e)?t.stylize(""+e,"boolean"):v(e)?t.stylize("null","null"):void 0}(t,i);if(o)return o;var s,c=Object.keys(i),u=(s={},c.forEach(function(t,e){s[t]=!0}),s);if(t.showHidden&&(c=Object.getOwnPropertyNames(i)),_(i)&&(0<=c.indexOf("message")||0<=c.indexOf("description")))return f(i);if(0===c.length){if(j(i)){var a=i.name?": "+i.name:"";return t.stylize("[Function"+a+"]","special")}if(b(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(O(i))return t.stylize(Date.prototype.toString.call(i),"date");if(_(i))return f(i)}var w,x="",L=!1,T=["{","}"];return p(i)&&(L=!0,T=["[","]"]),j(i)&&(x=" [Function"+(i.name?": "+i.name:"")+"]"),b(i)&&(x=" "+RegExp.prototype.toString.call(i)),O(i)&&(x=" "+Date.prototype.toUTCString.call(i)),_(i)&&(x=" "+f(i)),0!==c.length||L&&0!=i.length?n<0?b(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),w=L?function(t,e,i,n,r){for(var o=[],s=0,c=e.length;s<c;++s)E(e,String(s))?o.push(d(t,e,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(d(t,e,i,n,r,!0))}),o}(t,i,n,u,c):c.map(function(e){return d(t,i,n,u,e,L)}),t.seen.pop(),function(t,e,i){return 60<t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(w,x,T)):T[0]+x+T[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,i,n,r,o){var s,c,u;if((u=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?c=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(c=t.stylize("[Setter]","special")),E(n,r)||(s="["+r+"]"),c||(t.seen.indexOf(u.value)<0?-1<(c=v(i)?l(t,u.value,null):l(t,u.value,i-1)).indexOf("\n")&&(c=o?c.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+c.split("\n").map(function(t){return"   "+t}).join("\n")):c=t.stylize("[Circular]","special")),m(s)){if(o&&r.match(/^\d+$/))return c;s=(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(s,"string"))}return s+": "+c}function p(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return"number"==typeof t}function g(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===x(t)}function w(t){return"object"==typeof t&&null!==t}function O(t){return w(t)&&"[object Date]"===x(t)}function _(t){return w(t)&&("[object Error]"===x(t)||t instanceof Error)}function j(t){return"function"==typeof t}function x(t){return Object.prototype.toString.call(t)}function L(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(m(o)&&(o=n.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var i=n.pid;s[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else s[t]=function(){};return s[t]},(e.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=h,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=m,e.isRegExp=b,e.isObject=w,e.isDate=O,e.isError=_,e.isFunction=j,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(11);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;console.log("%s - %s",(i=[L((t=new Date).getHours()),L(t.getMinutes()),L(t.getSeconds())].join(":"),[t.getDate(),T[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i(12),e._extend=function(t,e){if(!e||!w(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t}}).call(this,i(4),i(10))},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(Zc,$c){var _c;_c=function(){return this}();try{_c=_c||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(_c=window)}Zc.exports=_c},function(t,e,i){"use strict";(function(t){var n=i(6),r=i.n(n),o=i(2),s=i.n(o),c=i(3),u=i.n(c),a=i(0),l=(Object(a.d)(),"undefined"!=typeof window?window:t||void 0),f=l.console||{log:function(){},info:function(){},warn:function(){},error:function(){}},d={info:"log|info|warn|error|alert",warn:"warn|error|alert",error:"error|alert",alert:"alert"},p=function(){function t(){var e=this,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"out",n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];s()(this,t),this.debug=!0===n?"info":n,this.prefix=i,n&&!d[n]&&(this.debug="info"),d.info.split("|").forEach(function(t){var i=e;i[t]=function(){var e=Array.from(arguments);e.unshift(t),i.out.apply(i,r()(e))}})}return u()(t,[{key:"out",value:function(){if(this.debug){var t=Array.from(arguments),e=t.shift(),i=f[e]||l[e];d[this.debug].split("|").includes(e)&&(t.unshift(this.prefix+"::"+Object(a.g)()),"alert"===e&&(t=[t.join("---")]),i.apply(l,t))}}},{key:"instance",value:function(t){var e=this;(d.info.split("|")||[]).forEach(function(i){t[i]=e[i]})}}]),t}();e.a=p}).call(this,i(4))},function(t,e,i){var n=i(7),r=i(8),o=i(9);t.exports=function(t){return n(t)||r(t)||o()}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){var i,n,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,a=[],l=!1,f=-1;function d(){l&&u&&(l=!1,u.length?a=u.concat(a):f=-1,a.length&&p())}function p(){if(!l){var t=c(d);l=!0;for(var e=a.length;e;){for(u=a,a=[];++f<e;)u&&u[f].run();f=-1,e=a.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];a.push(new h(t,e)),1!==a.length||l||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},function(t,e,i){"use strict";i.r(e);var n=i(5),r=(i(2),i(3),i(0)),o=i(1),s={mp4:"video/mp4",hls:"rtmp/hls",mpeg:"application/x-mpegURL"},c={LOADING:"loading",WAITING:"waiting",PAUSED:"paused",OFFLINE:"offline",TIMEOUT:"timeout",ERROR:"error",HIDEPRO:"hidepro"},u=Object(r.d)();function a(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.selector=t||".ivideo-js",this.evts={},this.opts=Object(r.b)({src:[],isLive:!1,controls:!0,hasProgress:!0,volume:1,allowFull:!0,poster:"",preload:"metadata",useCanvas:!1,useSelfControls:!1,inline:!0,autoplay:!1,loop:!1,timeout:30,width:"100%",height:220},e,!0),this.timecount=0,this.timeswitch=!0,this.status=c.LOADING,this.isPaused=!0,this.isFirstTouch=!0,this.touchMove=!1,this.touchPlay=!1,this.inited=!1,this._video=null,this._canvas={},this.init()}a.prototype.init=function(){this.log("video init..."),this.render()},a.prototype.render=function(){var t=this,e="string"==typeof this.selector?Object(r.i)(this.selector):this.selector;if(e){this.el=e,this.container=Object(r.i)(".ivideo",e)||Object(r.c)("div"),this.container.className="ivideo ivideo-loading",this.container.innerHTML="";var i=Object(r.c)("div");i.className="ivideo-components";var n='\n        <div class="loading">\n            <p><i></i>加载中...</p>\n        </div>\n        <div class="offline">\n            <p>网络连接已断开，点击重试</p>\n        </div>\n        <div class="timeout">\n            <p>加载超时，点击重试</p>\n        </div>\n        \x3c!-- 播放与暂停大按钮 --\x3e\n        <div class="ivideo-btn"></div>\n        <span class="ivideo-volume toast-hide">音量 100%</span>\n        <h2 class="ivideo-title">{{title}}</h2>',s=this.opts.src,c=Object(o.isFunction)(s)?s[0]:Object(o.isObject)(s)?s.src:s,u=this.opts.title||c.slice(c.lastIndexOf("/")+1)||"";n=n.replace("{{title}}",u),i.innerHTML=n,setTimeout(function(){t.container.appendChild(i),t.el.appendChild(t.container),t._offline=Object(r.i)(".offline",i),t._timeout=Object(r.i)(".timeout",i),t._playBig=Object(r.i)(".ivideo-btn",i),t._volume=Object(r.i)(".ivideo-volume",i),t.renderVideo(),t.setSize(),t.videoEvt(),t.inited=!0})}else this.error("元素不存在，请检测传入的el参数是否正确 el=".concat(e,", 支持元素，选择器"))},a.prototype.renderVideo=function(){var t=this,e=this.opts,i=Object(r.c)("video");if(i.className="ivideo-video",i.download=!1,i.crossorigin="anonymous",e.inline&&(i.setAttribute("webkit-playsinline",!0),i.setAttribute("playsinline",!0),i.setAttribute("x5-playsinline",!0),i.setAttribute("x5--video--player--type","h5"),i.setAttribute("x5-video-player-type","h5"),i.setAttribute("x-webkit-airplay","allow")),e.autoplay&&(i.autoplay=!0),e.loop&&(i.loop=!0),e.controls)if(e.useSelfControls)i.controls=!0;else{var n='\n                <div class="ivideo-play"></div>\n                <span class="ivideo-time">\n                    <time class="ivideo-cur">00:00</time> /\n                    <time class="ivideo-total">--:--</time>\n                </span>\n                {{progress}}';n=n.replace("{{progress}}",e.hasProgress?'<div class="ivideo-progress">\n                    <p class="ivideo-bar"></p>\n                    <p class="ivideo-buffered"></p>\n                </div>':""),e.allowFull&&(n+='<div class="ivideo-full"></div>');var o=Object(r.c)("div");o.className="ivideo-controller",o.innerHTML=e.controls?n:"",this.container.appendChild(o),setTimeout(function(){t._playBtn=Object(r.i)(".ivideo-play",o),t._cur=Object(r.i)(".ivideo-cur",o),t._duration=Object(r.i)(".ivideo-total",o),t._fullBtn=Object(r.i)(".ivideo-full",o),t._progress=Object(r.i)(".ivideo-progress",o),t._bar=Object(r.i)(".ivideo-bar",o),t._buffer=Object(r.i)(".ivideo-buffered",o)})}this._video=i,this.src(e.src),this.container.appendChild(this._video),this.execute("ready")},a.prototype.videoEvt=function(){var t=this,e=this._video,i=this.container,n=this;e.addEventListener("canplaythrough",function(){if(t.timeswitch=!1,i.classList.remove("ivideo-"+c.LOADING),i.classList.remove("ivideo-"+c.WAITING),e.paused&&i.classList.add("ivideo-"+c.PAUSED),t.isFirstTouch&&t.touchPlay&&u.isWeixin&&(t.play(),t.isFirstTouch=!1,t.touchPlay=!1),t._duration){var n=Object(r.e)(e.duration);t._duration.innerHTML=n}}),["playing","waiting","seeking","seeked"].forEach(function(t){e.addEventListener(t,function(e){switch(e.type){case"waiting":case"seeking":i.classList.add("ivideo-"+c.WAITING);break;case"playing":case"seeked":i.classList.remove("ivideo-"+c.WAITING)}n.execute(t)})}),["error"].forEach(function(t){e.addEventListener(t,function(t){n.error(t)})}),e.addEventListener("play",function(){i.classList.remove("ivideo-"+c.PAUSED),i.classList.remove("ivideo-"+c.LOADING),i.classList.remove("ivideo-"+c.WAITING),t.execute("play")}),e.addEventListener("pause",function(){i.classList.add("ivideo-"+c.PAUSED),t.execute("pause")}),e.addEventListener("timeupdate",function(){if(navigator.onLine){if(t.opts.controls){t._cur||(t._cur=Object(r.i)(".ivideo-cur",i));var n=Object(r.e)(e.currentTime);if(t._cur.innerHTML=n,!e.duration||0===e.currentTime)return;var o=t.getWidthForTime(t._video.currentTime);t._bar.style.width=o+"px",t.setBuffer()}t.execute("timeupdate")}else t.setStatus(c.OFFLINE)});var o={fx:0,fy:0,x:0,y:0};i.addEventListener("touchstart",function(e){if(i.classList.contains("video-"+c.LOADING))e.preventDefault();else{t.touchPlay=!1,t.touchMove=!1,t.isPaused=t._video.paused;var n=e.changedTouches[0];o.x=n.pageX,o.y=n.pageY,o.fx=n.pageX,o.fy=n.pageY}}),i.addEventListener("touchmove",function(e){t.touchMove=!0,e.preventDefault();var i=e.changedTouches[0],n=i.pageX,r=i.pageY,s=Math.abs(r-o.fy)>Math.abs(n-o.fx),c=Math.abs(n-o.fx)>Math.abs(r-o.fy);if(s){var u=0<o.y-r?1:-1;t.setVolume(u)}else if(c){var a=n-o.x;t.setCurrentTime(a)}o.x=i.pageX,o.y=i.pageY}),i.addEventListener("touchend",function(n){var o=n.target,s=o.tagName.toLowerCase(),a=o.classList;i.classList.contains("ivideo-"+c.LOADING)||(a.contains("ivideo-btn")||a.contains("ivideo-play")?u.isWeixin&&t.isFirstTouch?(t.touchPlay=!0,t.reload()):e.paused?t.play():t.pause():t.touchMove||"video"!==s?t.opts.allowFull&&a.contains("ivideo-full")?i.classList.contains("full")?(Object(r.a)(),i.classList.remove("full")):(i.classList.add("full"),Object(r.f)(i)):!t.isPaused&&t.touchMove&&t._video.play():i.classList.contains("ivideo-hidepro")?i.classList.remove("ivideo-hidepro"):i.classList.add("ivideo-hidepro"))}),[this._offline,this._timeout].forEach(function(e){e.addEventListener("touchend",function(){t.reload()})})},a.prototype.setCurrentTime=function(t){this._video.pause();var e=this._bar.offsetWidth+t;e<0||e>this._progress.offsetWidth?this.log("超出播放范围"):(e=(e=e<0?0:e)>this._progress.offsetWidth?this._progress.offsetWidth:e,this._bar.style.width=e+"px",this._video.currentTime=e/this._progress.offsetWidth*this._video.duration,this._cur.innerHTML=Object(r.e)(this._video.currentTime))},a.prototype.setSize=function(t){var e=this.opts;t=t||{width:e.width,height:e.height},this._canvas.width=parseInt(t.width),this._canvas.height=parseInt(t.height),this.container.style.width="number"==typeof t.width?t.width+"px":t.width,this.container.style.height="number"==typeof t.height?t.height+"px":t.height},a.prototype.src=function(t){if(t="string"==typeof t?{src:t}:t,Array.isArray(t)||(t=[t]),0!==t.length){this.opts.src=t;var e="";t.forEach(function(t){var i=s[t.type];e+='<source src="'.concat(t.src,'"'),e+=i?' type="'.concat(i,'" />'):"/>"}),navigator.onLine?(this._video.innerHTML=e,this.reload()):this.setStatus(c.OFFLINE)}else this.warn("请传入src参数")},a.prototype.reload=function(){this.timeswitch=!0,this.timer(),!u.isWeixin||this.inited?this.setStatus(c.LOADING):(this.container.classList.remove("ivideo-"+c.LOADING),this.container.classList.add("ivideo-"+c.PAUSED)),this._bar&&(this._bar.style.width=0),this._buffer&&(this._buffer.style.width=0),this._video.load()},a.prototype.play=function(){this._video.play()},a.prototype.pause=function(){this._video.pause()},a.prototype.stop=function(){this._video.load()},a.prototype.muted=function(t){this._video.muted=t},a.prototype.timer=function(){var t=this;if(this.timeswitch){if(this.timecount++,this.timecount===this.opts.timeout)return this.setStatus(c.TIMEOUT),this.timecount=0,void this.warn("加载超时");setTimeout(function(){t.timer()},1e3)}else this.timecount=0},a.prototype.setStatus=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";if(c[t.toUpperCase()]){var e=this.container;switch(t){case c.LOADING:e.classList.remove("ivideo-"+c.OFFLINE),e.classList.remove("ivideo-"+c.TIMEOUT);break;case c.OFFLINE:case c.TIMEOUT:this.timeswitch=!1,e.classList.remove("ivideo-"+c.LOADING),e.classList.remove("ivideo-"+c.WAITING)}var i="ivideo-"+t;e.classList.add(i)}else this.warn("不存在该状态，设置失败。setStatus:",t)},a.prototype.getWidthForTime=function(t){var e=this._progress.getBoundingClientRect();return t/this._video.duration*e.width},a.prototype.getTimeForWidth=function(t){return t/this._progress.getBoundingClientRect().width*this._video.duration},a.prototype.setVolume=function(t){var e=100*this._video.volume+t;e=Math.max(0,Math.min(100,e)),this._video.volume=e/100,this._volume.innerHTML="音量 "+Math.ceil(e)+"%",Object(r.j)(this._volume)},a.prototype.setBuffer=function(){if(4===this._video.readyState){var t=this._video.buffered.length,e=this.getWidthForTime(this._video.buffered.end(t-1));this._buffer.style.width=e+"px"}},a.prototype.on=function(t,e){if("string"!=typeof t||!Object(o.isFunction)(e))return this.warn("事件类型请传入字符串, 事件函数必须为函数"),void this.warn("type =",t,"handler =",e);this.evts[t]||(this.evts[t]=[]),this.evts[t].push(e)},a.prototype.execute=function(t){if(this.evts[t]){var e={video:this._video,src:this.opts.src};this.evts[t].forEach(function(t){t(e)})}},a.use=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];Array.isArray(t)||(t=[t]),t.forEach(function(t){t.instance(a.prototype)})};var l=a,f=(i(14),new n.a("iVideo",!0));l.use(f),("undefined"!=typeof window?window:void 0).iVideo=l},function(t,e){}]);